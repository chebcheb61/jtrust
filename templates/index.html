  {% extends 'base.html'%}
{% include 'header.html'%}

{% block title %} JTrust Royal Bank Customers {% endblock %}

{% block body %}
  
  <div class="container">
     <div class ="row">
        <div class ="col md-12">
           <div class ="jumbotron p-3">
           <h2>Manage <b>Client Records </b><button type ="button" class="btn btn-success float-right"
            data-toggle="modal" data-target="#mymodal">Add new Clients</button> </h2>
           {% with messages = get_flashed_messages() %}
          
           {% if messages %}
          
           {% for message in messages %}
           <div class="alert alert-success alert-dismissable role=""alert">
              <button type="button" class ="close" data-dismiss="alert" aria-label="close">
                 <span aria-hidden="true">x</span>
              </button>
              {{message}}

           </div>
          
           {% endfor %}

           {% endif %}
           
           {% endwith %}
            <table class="table table hover table-dark">
              <tr>
                 <th>Client Type</th>
                 <th>Client Segment</th>
                 <th>RM ID</th>
                 <th>CIF</th>
                 <th>Account Number</th>
                 <th>Client Name</th>
              </tr>
              {%for row in clients %}
              <tr>
                 <td>{{row.client_type}}</td>
                 <td>{{row.client_sagment}}</td>
                 <td>{{row.rm_id}}</td>
                 <td>{{row.cif}}</td>
                 <td>{{row.acc_no}}</td>
                 <td>{{row.client_name}}</td>

                 <td>
                    <a href="/update/{row.acc_no}" class="btn btn-warning btn-xs" data-toggle="modal" data-target="#modaledit{{row.acc_no}}">Edit</a>
                    <a href="/delete/{{row.acc_no}}" class="btn btn-danger btn-xs" onclick="return confirm('Are You sure to Delete ?')">Delete</a>
                  </td>
              </tr>
              <!--Modal for Update-->
              <div id="modaledit{{row.acc_no}}" class="modal fade" role="dialog">
               <div class="modal-dialog">
             
             
                  <div class="modal-content">
             
             
                     <div class="modal-header">
             
             
                        <h4 class="modal-title">Update Information</h4>
             
             
                     </div>
             
             
                     <div class="modal-body">
             
             
                        <form action="{{url_for('update')}}" method="POST">
             
             
                           <div class="form-group">
             
             
                              <label>Client Type:</label>
             
                              <input type="text" class="form-control" name="client_type" value="{{row.client_type}}" placeholder="Personal">
             
             
                           </div>
             
             
             
                           <div class="form-group">
             
             
                              <label>Client Sagment:</label>
             
                              <input type="text" class="form-control" name="client_segment" value="{{row.client_sagment}}">
             
             
                           </div>

                           <div class="form-group">
             
             
                              <label>RM ID:</label>
             
                              <input type="number" class="form-control" name="rm_id" value="{{row.rm_id}}">
             
             
                           </div>
             
                           <div class="form-group">
             
             
                              <label>CIF:</label>
             
                              <input type="number" class="form-control" name="cif" value="{{row.cif}}">
             
             
                           </div>

                           <div class="form-group">
             
             
                              <label>Account Number:</label>
             
                              <input type="number" class="form-control" name="acc_no" value="{{row.acc_no}}">
             
             
                           </div>

                           <div class="form-group">
             
             
                              <label>Client Name:</label>
             
                              <input type="text" class="form-control" name="client_name" value="{{row.client_name}}">
             
             
                           </div>
             
             
                           <div class="form-group">
             
             
                              <button class="btn btn-primary" type="submit">Update</button>
             
             
                           </div>
             
             
                        </form>
             
             
                     </div>
             
             
                     <div class="modal-footer">
             
             
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
             
             
                     </div>
             
             
                  </div>
             
             
               </div>
             </div>
             {% endfor %}
           </table>      
         </div>
                           <!-- Modal Add Employee-->
 
 
<div id="mymodal" class="modal fade" role="dialog">
   <div class="modal-dialog">
      <div class="modal-content">
         <div class="modal-header">
            <h4 class="modal-title">Add New Client</h4>
         </div>
         <div class="modal-body">
 
            <form action="{{url_for('insert')}}" method="POST">
  
 
               <div class="form-group">
 
                  <label>Client Type:</label>
                  <input type="text" class="form-control" name="client_type">
 
 
               </div>
 
 
                <div class="form-group">
 
 
                  <label>Client Sagment:</label>
                  <input type="text" class="form-control" name="client_sagment">
 
 
               </div>
 

               <div class="form-group">
 
 
                  <label>RM ID:</label>
                  <input type="number" class="form-control" name="rm_id">
 
 
               </div>
 
                <div class="form-group">
 
 
                  <label>CIF:</label>
                  <input type="number" class="form-control" name="cif">
 
 
               </div>


               <div class="form-group">
 
 
                  <label>Account Number:</label>
                  <input type="number" class="form-control" name="acc_no">
 
 
               </div>


               <div class="form-group">
 
 
                  <label>Client Name:</label>
                  <input type="name" class="form-control" name="client_name">
 
 
               </div>
 
 
 
               <div class="form-group">
 
 
                  <button class="btn btn-primary" type="submit">Add Client</button>
 
 
               </div>
 
 
            </form>
 
 
         </div>
 
 
         <div class="modal-footer">
 
 
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
 
 
         </div>
 
 
      </div>
 
 
   </div>
 
 
</div>
      </div>
     </div>
   </div>

{% endblock %}